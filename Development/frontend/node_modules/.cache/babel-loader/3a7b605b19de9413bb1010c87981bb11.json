{"remainingRequest":"E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\src\\handlers\\spotify.js","dependencies":[{"path":"E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\src\\handlers\\spotify.js","mtime":1609613567177},{"path":"E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\DesignWork\\PROGRAMMING\\Tools-Specific-Projects\\Javascript\\Personal Projects\\Web Apps\\ON PROGRESS\\Emotion-Based-Music-Streaming-App-WEB\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L0Rlc2lnbldvcmsvUFJPR1JBTU1JTkcvVG9vbHMtU3BlY2lmaWMtUHJvamVjdHMvSmF2YXNjcmlwdC9QZXJzb25hbCBQcm9qZWN0cy9XZWIgQXBwcy9PTiBQUk9HUkVTUy9FbW90aW9uLUJhc2VkLU11c2ljLVN0cmVhbWluZy1BcHAtV0VCL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1jeWNsZSAqLwoKLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi8KCi8qIGVzbGludC1kaXNhYmxlIG5vLWxvbmVseS1pZiAqLwoKLyogZXNsaW50LWRpc2FibGUgbm8tYXdhaXQtaW4tbG9vcCAqLwoKLyogZXNsaW50LWRpc2FibGUgaW5kZW50ICovCgovKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovCgovKiBlc2xpbnQtZGlzYWJsZSBvcGVyYXRvci1saW5lYnJlYWsgKi8KCi8qIGVzbGludC1kaXNhYmxlIG5vLXRyYWlsaW5nLXNwYWNlcyAqLwoKLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovCgovKiBlc2xpbnQtZGlzYWJsZSBwYWRkZWQtYmxvY2tzICovCgovKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovCi8vIGxvZ2ljCmltcG9ydCBoYXNoVVJMIGZyb20gJ0AvY29tcG9uZW50cy9VdGlscy9sb2dpYy9oYXNoVVJMJzsKaW1wb3J0IHNsZWVwIGZyb20gJ0AvY29tcG9uZW50cy9VdGlscy9sb2dpYy9zbGVlcCc7CmltcG9ydCB7IGNyZWF0ZVNvbmdEb3RzIH0gZnJvbSAnQC9jb21wb25lbnRzL1V0aWxzL3A1L3NvbmdWaXN1YWxpc2F0aW9uJzsgLy8gU3BvdGlmeQoKdmFyIHNwb3RpZnlQbGF5ZXJJRCA9IG51bGw7CnZhciBwbGF5bGlzdCA9IFtdOyAvLyBTZXQgdXAgdGhlIFdlYiBQbGF5YmFjayBTREsgUExBWUVSCgp3aW5kb3cub25TcG90aWZ5UGxheWVyQVBJUmVhZHkgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIFRPS0VOID0gaGFzaFVSTCgpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKCiAgdmFyIHBsYXllciA9IG5ldyBTcG90aWZ5LlBsYXllcih7CiAgICBuYW1lOiAnSUFFJywKICAgIGdldE9BdXRoVG9rZW46IGZ1bmN0aW9uIGdldE9BdXRoVG9rZW4oY2IpIHsKICAgICAgY2IoVE9LRU4pOwogICAgfQogIH0pOyAvLyBFcnJvciBoYW5kbGluZwoKICBwbGF5ZXIub24oJ2luaXRpYWxpemF0aW9uX2Vycm9yJywgZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBjb25zb2xlLmVycm9yKGUpOwogIH0pOwogIHBsYXllci5vbignYXV0aGVudGljYXRpb25fZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSk7CiAgfSk7CiAgcGxheWVyLm9uKCdhY2NvdW50X2Vycm9yJywgZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBjb25zb2xlLmVycm9yKGUpOwogIH0pOwogIHBsYXllci5vbigncGxheWJhY2tfZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSk7CiAgfSk7IC8vIFBsYXliYWNrIHN0YXR1cyB1cGRhdGVzCgogIHBsYXllci5vbigncGxheWVyX3N0YXRlX2NoYW5nZWQnLCBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIGNvbnNvbGUubG9nKHN0YXRlKTsgLy8gJCgnI2N1cnJlbnQtdHJhY2snKS5hdHRyKCdzcmMnLCBzdGF0ZS50cmFja193aW5kb3cuY3VycmVudF90cmFjay5hbGJ1bS5pbWFnZXNbMF0udXJsKTsKICAgIC8vICQoJyNjdXJyZW50LXRyYWNrLW5hbWUnKS50ZXh0KHN0YXRlLnRyYWNrX3dpbmRvdy5jdXJyZW50X3RyYWNrLm5hbWUpOwogIH0pOyAvLyBQbGF5ZXIgUmVhZHkKCiAgcGxheWVyLm9uKCdyZWFkeScsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICBjb25zb2xlLmxvZygnUmVhZHkgd2l0aCBEZXZpY2UgSUQnLCBkYXRhLmRldmljZV9pZCk7IC8vIG1ha2UgdGhlIHBsYXllciBpZCBnbG9iYWxseSBhY2Nlc3NpYmxlCgogICAgc3BvdGlmeVBsYXllcklEID0gZGF0YS5kZXZpY2VfaWQ7CiAgfSk7IC8vIENvbm5lY3QgdG8gdGhlIHBsYXllciEKCiAgcGxheWVyLmNvbm5lY3QoKTsKfTsKCmZ1bmN0aW9uIGdldFNvbmdzRGF0YSgpIHsKICByZXR1cm4gX2dldFNvbmdzRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0U29uZ3NEYXRhKCkgewogIF9nZXRTb25nc0RhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICB2YXIgVE9LRU4sIHJlcXVlc3QsIHJlc3BvbnNlOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBUT0tFTiA9IGhhc2hVUkwoKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9zcG90aWZ5Lz90b2tlbj0iLmNvbmNhdChUT0tFTikpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmVxdWVzdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQudDApOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCAxMV1dKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRTb25nc0RhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFUZW1wUGxheWxpc3QoKSB7CiAgLy8gZW1wdHkgdGhlIHBsYXlsaXN0IGFuZCByZWZpbGwgaXQKICBwbGF5bGlzdCA9IFtdOwp9CmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQbGF5bGlzdChpZCwgaG93KSB7CiAgLy8gc3BsaWNlIGl0IG9mZiB0aGUgcGxheWxpc3QgYXJyYXkKICBpZiAoaG93ID09PSAncmVtb3ZlJykgewogICAgZm9yICh2YXIgaSA9IHBsYXlsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7CiAgICAgIGlmIChwbGF5bGlzdFtpXSA9PT0gaWQpIHBsYXlsaXN0LnNwbGljZShpZCwgMSk7CiAgICB9CiAgfSBlbHNlIHBsYXlsaXN0LnB1c2goaWQpOwp9CmV4cG9ydCBmdW5jdGlvbiBtYWtlQVRlbXBQbGF5bGlzdChfeCwgX3gyLCBfeDMsIF94NCwgX3g1LCBfeDYsIF94NywgX3g4KSB7CiAgcmV0dXJuIF9tYWtlQVRlbXBQbGF5bGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8vIFBsYXkgYSB0cmFjayB1c2luZyBvdXIgbmV3IGRldmljZSBJRAoKZnVuY3Rpb24gX21ha2VBVGVtcFBsYXlsaXN0KCkgewogIF9tYWtlQVRlbXBQbGF5bGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaWQsIHZhbGVuY2UsIGFyb3VzYWwsIHN0YXJEb3RzLCB3aWR0aCwgaGVpZ2h0LCBjaG9zZW5Qb2ludHMsIHA1KSB7CiAgICB2YXIgaTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghKHBsYXlsaXN0Lmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGFwcGVuZCB0aGUgc29uZydzIGlkcyB0byB0aGUgYXJyYXkKICAgICAgICAgICAgcGxheWxpc3QucHVzaChpZCk7IC8vIGFjY2VwdGVkIHNvbmdzCgogICAgICAgICAgICBjcmVhdGVTb25nRG90cygnYWNjZXB0ZWQnLCB2YWxlbmNlLCBhcm91c2FsLCBpZCwgc3RhckRvdHMsIHdpZHRoLCBoZWlnaHQsIHA1KTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmICghKGkgPCBwbGF5bGlzdC5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKCEoaWQgPT09IHBsYXlsaXN0W2ldKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBzbGVlcCgyNTApOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIC8vIHJlZG8gdGhlIHdvcmtmbG93CiAgICAgICAgICAgIGhhbmRsaW5nU29uZ3NEYXRhKHZhbGVuY2UsIGFyb3VzYWwsIHN0YXJEb3RzLCBjaG9zZW5Qb2ludHMsIHdpZHRoLCBoZWlnaHQsIHA1KTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoImJyZWFrIiwgMjIpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGlmICghKGkgPT09IHBsYXlsaXN0Lmxlbmd0aCAtIDEpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSBzb25nJ3MgaWRzIHRvIHRoZSBhcnJheQogICAgICAgICAgICBwbGF5bGlzdC5wdXNoKGlkKTsgLy8gcHJldmlld191cmxzLnB1c2gocHJldmlld191cmwpOwogICAgICAgICAgICAvLyB0aXRsZXMucHVzaCh0aXRsZSk7CiAgICAgICAgICAgIC8vIHZhbGVuY2VzLnB1c2goc29uZ192YWxlbmNlKTsKICAgICAgICAgICAgLy8gYXJvdXNhbHMucHVzaChzb25nX2VuZXJneSk7CgogICAgICAgICAgICBjb25zb2xlLmxvZygiQ291bnRlciAiLmNvbmNhdChOdW1iZXIocGxheWxpc3QubGVuZ3RoKSkpOyAvLyBhd2FpdCBzbGVlcCgyNTApOwogICAgICAgICAgICAvLyBhY2NlcHRlZCBzb25ncwoKICAgICAgICAgICAgY3JlYXRlU29uZ0RvdHMoJ2FjY2VwdGVkJywgdmFsZW5jZSwgYXJvdXNhbCwgaWQsIHN0YXJEb3RzLCB3aWR0aCwgaGVpZ2h0LCBwNSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJicmVhayIsIDIyKTsKCiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBpICs9IDE7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX21ha2VBVGVtcFBsYXlsaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIHBsYXlTb25nKF94OSkgewogIHJldHVybiBfcGxheVNvbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvLyBHTE9CQUxMWSBBQ0NFU1NJQkxFIEZVTkNUSU9OUwoKCmZ1bmN0aW9uIF9wbGF5U29uZygpIHsKICBfcGxheVNvbmcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKFRPS0VOKSB7CiAgICB2YXIgcmVxdWVzdCwgcmVzcG9uc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjUwMDAvcGxheS8/dG9rZW49Ii5jb25jYXQoVE9LRU4sICImcGxheWxpc3Q9IikuY29uY2F0KHBsYXlsaXN0LCAiJnBsYXllcl9pZD0iKS5jb25jYXQoc3BvdGlmeVBsYXllcklEKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXF1ZXN0ID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDEwOwogICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0My50MCk7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMCwgMTBdXSk7CiAgfSkpOwogIHJldHVybiBfcGxheVNvbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIExvZ2luSGFuZGxlcnMoKSB7CiAgcmV0dXJuIF9Mb2dpbkhhbmRsZXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9Mb2dpbkhhbmRsZXJzKCkgewogIF9Mb2dpbkhhbmRsZXJzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgIHZhciBQUk9EVUNUSU9OLCBFTkRQT0lOVDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIC8vIGhhbmRsaW5nIHByb2R1Y3Rpb24gYW5kIGRldmVsb3BtZW50IG1vZGUKICAgICAgICAgICAgUFJPRFVDVElPTiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WOyAvLyBpZiBpdCdzIHByb2R1Y3Rpb24gbW9kZSwgZ2V0IHJpZCBvZiB0aGUgcHJveGllZCBzZXJ2ZXIsCiAgICAgICAgICAgIC8vIGJlY2F1c2UsIHRoZSBjbGllbnQgd2lsbCBiZSBidWlsdCBvbiB0b3Agb2YgUHl0aG9uIHRoZW4sCiAgICAgICAgICAgIC8vIGFuZCBpdCBpcyBzZXJ2ZWQgYnkgUHl0aG9uIGFzIHN0YXRpYyBmaWxlcwogICAgICAgICAgICAvLyBvdGhlcndpc2UsIHJ1biB0aGVzZSB0d28gc2lkZXMgc2VwYXJhdGVseSwKICAgICAgICAgICAgLy8gd2l0aCB0aGUgZW5kcG9pbnQgL2FwaSBhcyBhIHByb3h5IHRvIHRoZSBzZXJ2ZXIKCiAgICAgICAgICAgIEVORFBPSU5UID0gUFJPRFVDVElPTiA9PT0gJ3Byb2R1Y3Rpb24nID8gJycgOiAnL2FwaSc7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIiIuY29uY2F0KEVORFBPSU5ULCAiL2xvZ2luIik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJzsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQpOwogIH0pKTsKICByZXR1cm4gX0xvZ2luSGFuZGxlcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGhhbmRsaW5nU29uZ3NEYXRhKF94MTAsIF94MTEsIF94MTIsIF94MTMsIF94MTQsIF94MTUsIF94MTYpIHsKICByZXR1cm4gX2hhbmRsaW5nU29uZ3NEYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9oYW5kbGluZ1NvbmdzRGF0YSgpIHsKICBfaGFuZGxpbmdTb25nc0RhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KHZhbGVuY2UsIGFyb3VzYWwsIHN0YXJEb3RzLCBjaG9zZW5Qb2ludHMsIHdpZHRoLCBoZWlnaHQsIHA1KSB7CiAgICB2YXIgYXVkaW9fZmVhdHVyZXMsIGksIHNvbmdfZGF0YSwgYm91bmRzLCBzb25nX2ksIHNvbmdfaiwgc29uZ194LCBzb25nX3k7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBnZXRTb25nc0RhdGEoKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGF1ZGlvX2ZlYXR1cmVzID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgaWYgKCEoaSA8IGF1ZGlvX2ZlYXR1cmVzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDMyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzb25nX2RhdGEgPSBhdWRpb19mZWF0dXJlc1tpXTsgLy8gaWYgcGxheWxpc3QgYXJyYXkgaGFzbid0IHJlYWNoZWQgaXRzIGVuZAoKICAgICAgICAgICAgaWYgKCEocGxheWxpc3QubGVuZ3RoIDwgNSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIShpIDwgYXVkaW9fZmVhdHVyZXMubGVuZ3RoIC0gMSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBib3VuZHMgPSBzdGFyRG90c1tjaG9zZW5Qb2ludHNbMF1dW2Nob3NlblBvaW50c1sxXV0uc2hvd0JvdW5kYXJpZXMoKTsgLy8gY29uc29sZS5sb2coYEJvdW5kczogJHtib3VuZHMueDF9LCAke2JvdW5kcy54Mn0sICR7Ym91bmRzLnkxfSwgJHtib3VuZHMueTJ9YCk7CiAgICAgICAgICAgIC8vIG1hcCBzb25nJ3MgYWZmZWN0aXZlIHZhbHVlcyB0byBjb29yZGluYXRlcyBvbiB0aGUgbWFwCgogICAgICAgICAgICBzb25nX2kgPSBNYXRoLmZsb29yKHNvbmdfZGF0YS52YWxlbmNlICogc3RhckRvdHMubGVuZ3RoKTsKICAgICAgICAgICAgc29uZ19qID0gTWF0aC5mbG9vcigoMSAtIHNvbmdfZGF0YS5hcm91c2FsKSAqIHN0YXJEb3RzW3NvbmdfaV0ubGVuZ3RoKTsKICAgICAgICAgICAgc29uZ194ID0gd2lkdGggLyA1ICsgc29uZ19pICogMTUuNDsKICAgICAgICAgICAgc29uZ195ID0gaGVpZ2h0IC8gNSArIHNvbmdfaiAqIDE1LjQ7IC8vIGNvbnNvbGUubG9nKGBTb25nJ3MgQ29vcmRpbmF0ZXM6ICR7c29uZ194fSwgJHtzb25nX3l9YCk7CiAgICAgICAgICAgIC8vIGNvbXBhcmUKCiAgICAgICAgICAgIGlmICghKHNvbmdfeCA+IGJvdW5kcy54MSAmJiBzb25nX3ggPCBib3VuZHMueDIgJiYgc29uZ195ID4gYm91bmRzLnkxICYmIHNvbmdfeSA8IGJvdW5kcy55MikpIHsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE2OwogICAgICAgICAgICByZXR1cm4gbWFrZUFUZW1wUGxheWxpc3Qoc29uZ19kYXRhLmlkLCBzb25nX2RhdGEudmFsZW5jZSwgc29uZ19kYXRhLmFyb3VzYWwsIHN0YXJEb3RzLCB3aWR0aCwgaGVpZ2h0LCBjaG9zZW5Qb2ludHMsIHA1KTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE5OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAvLyB1bmFjY2VwdGVkIHNvbmdzCiAgICAgICAgICAgIGNyZWF0ZVNvbmdEb3RzKCd1bmFjY2VwdGVkJywgc29uZ19kYXRhLnZhbGVuY2UsIHNvbmdfZGF0YS5hcm91c2FsLCBzb25nX2RhdGEuaWQsIHN0YXJEb3RzLCB3aWR0aCwgaGVpZ2h0LCBwNSk7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyNDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMzsKICAgICAgICAgICAgcmV0dXJuIHNsZWVwKDUwMCk7CgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGxheWxpc3QubGVuZ3RoKQogICAgICAgICAgICBoYW5kbGluZ1NvbmdzRGF0YSh2YWxlbmNlLCBhcm91c2FsLCBzdGFyRG90cywgY2hvc2VuUG9pbnRzLCB3aWR0aCwgaGVpZ2h0LCBwNSk7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgY29uc29sZS5sb2coIkVuZCBUaGUgTG9vcCBXaXRoICIuY29uY2F0KHBsYXlsaXN0Lmxlbmd0aCwgIiBzb25ncyIpKTsKICAgICAgICAgICAgcGxheVNvbmcoc29uZ19kYXRhLmFjY2Vzc190b2tlbiwgcGxheWxpc3QpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgiYnJlYWsiLCAzMik7CgogICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgaSArPSAxOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU1KTsKICB9KSk7CiAgcmV0dXJuIF9oYW5kbGluZ1NvbmdzRGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["E:/DesignWork/PROGRAMMING/Tools-Specific-Projects/Javascript/Personal Projects/Web Apps/ON PROGRESS/Emotion-Based-Music-Streaming-App-WEB/frontend/src/handlers/spotify.js"],"names":["hashURL","sleep","createSongDots","spotifyPlayerID","playlist","window","onSpotifyPlayerAPIReady","TOKEN","player","Spotify","Player","name","getOAuthToken","cb","on","e","console","error","state","log","data","device_id","connect","getSongsData","fetch","request","json","response","removeATempPlaylist","updatePlaylist","id","how","i","length","splice","push","makeATempPlaylist","valence","arousal","starDots","width","height","chosenPoints","p5","handlingSongsData","Number","playSong","LoginHandlers","PRODUCTION","process","env","NODE_ENV","ENDPOINT","location","href","audio_features","song_data","bounds","showBoundaries","song_i","Math","floor","song_j","song_x","song_y","x1","x2","y1","y2","access_token"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;AACA,OAAOA,OAAP,MAAoB,kCAApB;AACA,OAAOC,KAAP,MAAkB,gCAAlB;AAEA,SAASC,cAAT,QAA+B,yCAA/B,C,CAEA;;AACA,IAAIC,eAAe,GAAG,IAAtB;AACA,IAAIC,QAAQ,GAAG,EAAf,C,CAEA;;AACAC,MAAM,CAACC,uBAAP,GAAiC,YAAM;AACrC,MAAMC,KAAK,GAAGP,OAAO,EAArB,CADqC,CAGrC;;AACA,MAAMQ,MAAM,GAAG,IAAIC,OAAO,CAACC,MAAZ,CAAmB;AAChCC,IAAAA,IAAI,EAAE,KAD0B;AAEhCC,IAAAA,aAAa,EAAE,uBAACC,EAAD,EAAQ;AAAEA,MAAAA,EAAE,CAACN,KAAD,CAAF;AAAY;AAFL,GAAnB,CAAf,CAJqC,CASrC;;AACAC,EAAAA,MAAM,CAACM,EAAP,CAAU,sBAAV,EAAkC,UAACC,CAAD;AAAA,WAAOC,OAAO,CAACC,KAAR,CAAcF,CAAd,CAAP;AAAA,GAAlC;AACAP,EAAAA,MAAM,CAACM,EAAP,CAAU,sBAAV,EAAkC,UAACC,CAAD;AAAA,WAAOC,OAAO,CAACC,KAAR,CAAcF,CAAd,CAAP;AAAA,GAAlC;AACAP,EAAAA,MAAM,CAACM,EAAP,CAAU,eAAV,EAA2B,UAACC,CAAD;AAAA,WAAOC,OAAO,CAACC,KAAR,CAAcF,CAAd,CAAP;AAAA,GAA3B;AACAP,EAAAA,MAAM,CAACM,EAAP,CAAU,gBAAV,EAA4B,UAACC,CAAD;AAAA,WAAOC,OAAO,CAACC,KAAR,CAAcF,CAAd,CAAP;AAAA,GAA5B,EAbqC,CAerC;;AACAP,EAAAA,MAAM,CAACM,EAAP,CAAU,sBAAV,EAAkC,UAACI,KAAD,EAAW;AAC3CF,IAAAA,OAAO,CAACG,GAAR,CAAYD,KAAZ,EAD2C,CAE3C;AACA;AACD,GAJD,EAhBqC,CAsBrC;;AACAV,EAAAA,MAAM,CAACM,EAAP,CAAU,OAAV,EAAmB,UAACM,IAAD,EAAU;AAC3BJ,IAAAA,OAAO,CAACG,GAAR,CAAY,sBAAZ,EAAoCC,IAAI,CAACC,SAAzC,EAD2B,CAG3B;;AACAlB,IAAAA,eAAe,GAAGiB,IAAI,CAACC,SAAvB;AACD,GALD,EAvBqC,CA8BrC;;AACAb,EAAAA,MAAM,CAACc,OAAP;AACD,CAhCD;;SAkCeC,Y;;;;;0EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACQhB,YAAAA,KADR,GACgBP,OAAO,EADvB;AAAA;AAAA;AAAA,mBAM0BwB,KAAK,gDAAyCjB,KAAzC,EAN/B;;AAAA;AAMUkB,YAAAA,OANV;AAAA;AAAA,mBAW2BA,OAAO,CAACC,IAAR,EAX3B;;AAAA;AAWUC,YAAAA,QAXV;AAAA,6CAaWA,QAbX;;AAAA;AAAA;AAAA;AAgBIX,YAAAA,OAAO,CAACG,GAAR;AAhBJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAqBA,OAAO,SAASS,mBAAT,GAA+B;AACpC;AACAxB,EAAAA,QAAQ,GAAG,EAAX;AACD;AAED,OAAO,SAASyB,cAAT,CAAwBC,EAAxB,EAA4BC,GAA5B,EAAiC;AAEtC;AACA,MAAIA,GAAG,KAAK,QAAZ,EAAsB;AACpB,SAAK,IAAIC,CAAC,GAAG5B,QAAQ,CAAC6B,MAAT,GAAkB,CAA/B,EAAkCD,CAAC,IAAI,CAAvC,EAA0CA,CAAC,IAAI,CAA/C,EAAkD;AAChD,UAAI5B,QAAQ,CAAC4B,CAAD,CAAR,KAAgBF,EAApB,EAAwB1B,QAAQ,CAAC8B,MAAT,CAAgBJ,EAAhB,EAAoB,CAApB;AACzB;AACF,GAJD,MAIO1B,QAAQ,CAAC+B,IAAT,CAAcL,EAAd;AACR;AAED,gBAAsBM,iBAAtB;AAAA;AAAA,C,CAqDA;;;+EArDO,kBAAiCN,EAAjC,EAAqCO,OAArC,EAA8CC,OAA9C,EAAuDC,QAAvD,EAAiEC,KAAjE,EAAwEC,MAAxE,EAAgFC,YAAhF,EAA8FC,EAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEDvC,QAAQ,CAAC6B,MAAT,KAAoB,CAFnB;AAAA;AAAA;AAAA;;AAIH;AACA7B,YAAAA,QAAQ,CAAC+B,IAAT,CAAcL,EAAd,EALG,CAOH;;AACA5B,YAAAA,cAAc,CAAC,UAAD,EAAamC,OAAb,EAAsBC,OAAtB,EAA+BR,EAA/B,EACES,QADF,EACYC,KADZ,EACmBC,MADnB,EAC2BE,EAD3B,CAAd;AARG;AAAA;;AAAA;AAWMX,YAAAA,CAXN,GAWU,CAXV;;AAAA;AAAA,kBAWaA,CAAC,GAAG5B,QAAQ,CAAC6B,MAX1B;AAAA;AAAA;AAAA;;AAAA,kBAcGH,EAAE,KAAK1B,QAAQ,CAAC4B,CAAD,CAdlB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAgBO/B,KAAK,CAAC,GAAD,CAhBZ;;AAAA;AAkBC;AACA2C,YAAAA,iBAAiB,CAACP,OAAD,EAAUC,OAAV,EAAmBC,QAAnB,EAA6BG,YAA7B,EAA2CF,KAA3C,EAAkDC,MAAlD,EAA0DE,EAA1D,CAAjB;AAnBD;;AAAA;AAAA,kBAyBKX,CAAC,KAAK5B,QAAQ,CAAC6B,MAAT,GAAkB,CAzB7B;AAAA;AAAA;AAAA;;AA2BG;AACA7B,YAAAA,QAAQ,CAAC+B,IAAT,CAAcL,EAAd,EA5BH,CA8BG;AAEA;AAEA;AAEA;;AAEAd,YAAAA,OAAO,CAACG,GAAR,mBAAuB0B,MAAM,CAACzC,QAAQ,CAAC6B,MAAV,CAA7B,GAtCH,CAwCG;AAEA;;AACA/B,YAAAA,cAAc,CAAC,UAAD,EAAamC,OAAb,EAAsBC,OAAtB,EAA+BR,EAA/B,EACES,QADF,EACYC,KADZ,EACmBC,MADnB,EAC2BE,EAD3B,CAAd;AA3CH;;AAAA;AAWkCX,YAAAA,CAAC,IAAI,CAXvC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAsDQc,Q;;EAcf;;;;sEAdA,kBAAwBvC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAK0BiB,KAAK,6CAAsCjB,KAAtC,uBAAwDH,QAAxD,wBAA8ED,eAA9E,EAL/B;;AAAA;AAKUsB,YAAAA,OALV;AAAA;AAAA,mBAO2BA,OAAO,CAACC,IAAR,EAP3B;;AAAA;AAOUC,YAAAA,QAPV;AAQIX,YAAAA,OAAO,CAACG,GAAR,CAAYQ,QAAZ;AARJ;AAAA;;AAAA;AAAA;AAAA;AAUIX,YAAAA,OAAO,CAACG,GAAR;;AAVJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAeA,gBAAsB4B,aAAtB;AAAA;AAAA;;;2EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AACL;AACMC,YAAAA,UAFD,GAEcC,OAAO,CAACC,GAAR,CAAYC,QAF1B,EAIL;AACA;AACA;AACA;AACA;;AACMC,YAAAA,QATD,GASaJ,UAAU,KAAK,YAAhB,GAAgC,EAAhC,GAAqC,MATjD;;AAUL,gBAAI;AACF3C,cAAAA,MAAM,CAACgD,QAAP,CAAgBC,IAAhB,aAA0BF,QAA1B;AACD,aAFD,CAEE,OAAOrC,CAAP,EAAU;AACVV,cAAAA,MAAM,CAACgD,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACAtC,cAAAA,OAAO,CAACG,GAAR,CAAYJ,CAAZ;AACD;;AAfI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAkBP,gBAAsB6B,iBAAtB;AAAA;AAAA;;;+EAAO,kBAAiCP,OAAjC,EAA0CC,OAA1C,EAAmDC,QAAnD,EAA6DG,YAA7D,EAA2EF,KAA3E,EAAkFC,MAAlF,EAA0FE,EAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAGwBpB,YAAY,EAHpC;;AAAA;AAGCgC,YAAAA,cAHD;AAMIvB,YAAAA,CANJ,GAMQ,CANR;;AAAA;AAAA,kBAMWA,CAAC,GAAGuB,cAAc,CAACtB,MAN9B;AAAA;AAAA;AAAA;;AAQGuB,YAAAA,SARH,GAQeD,cAAc,CAACvB,CAAD,CAR7B,EAUH;;AAVG,kBAWC5B,QAAQ,CAAC6B,MAAT,GAAkB,CAXnB;AAAA;AAAA;AAAA;;AAAA,kBAcGD,CAAC,GAAGuB,cAAc,CAACtB,MAAf,GAAwB,CAd/B;AAAA;AAAA;AAAA;;AAgBOwB,YAAAA,MAhBP,GAgBgBlB,QAAQ,CAACG,YAAY,CAAC,CAAD,CAAb,CAAR,CAA0BA,YAAY,CAAC,CAAD,CAAtC,EAA2CgB,cAA3C,EAhBhB,EAiBC;AAEA;;AACMC,YAAAA,MApBP,GAoBgBC,IAAI,CAACC,KAAL,CAAWL,SAAS,CAACnB,OAAV,GAAoBE,QAAQ,CAACN,MAAxC,CApBhB;AAqBO6B,YAAAA,MArBP,GAqBgBF,IAAI,CAACC,KAAL,CAAW,CAAC,IAAIL,SAAS,CAAClB,OAAf,IAA0BC,QAAQ,CAACoB,MAAD,CAAR,CAAiB1B,MAAtD,CArBhB;AAuBO8B,YAAAA,MAvBP,GAuBgBvB,KAAK,GAAG,CAAR,GAAYmB,MAAM,GAAG,IAvBrC;AAwBOK,YAAAA,MAxBP,GAwBgBvB,MAAM,GAAG,CAAT,GAAaqB,MAAM,GAAG,IAxBtC,EAyBC;AAEA;;AA3BD,kBA4BKC,MAAM,GAAGN,MAAM,CAACQ,EAAhB,IACAF,MAAM,GAAGN,MAAM,CAACS,EADhB,IAEDF,MAAM,GAAGP,MAAM,CAACU,EAFf,IAGAH,MAAM,GAAGP,MAAM,CAACW,EA/BrB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkCWhC,iBAAiB,CAACoB,SAAS,CAAC1B,EAAX,EAAe0B,SAAS,CAACnB,OAAzB,EAAkCmB,SAAS,CAAClB,OAA5C,EAAqDC,QAArD,EAA+DC,KAA/D,EAAsEC,MAAtE,EAA8EC,YAA9E,EAA4FC,EAA5F,CAlC5B;;AAAA;AAAA;AAAA;;AAAA;AAqCG;AACAzC,YAAAA,cAAc,CAAC,YAAD,EAAesD,SAAS,CAACnB,OAAzB,EAAkCmB,SAAS,CAAClB,OAA5C,EAAqDkB,SAAS,CAAC1B,EAA/D,EACES,QADF,EACYC,KADZ,EACmBC,MADnB,EAC2BE,EAD3B,CAAd;;AAtCH;AAAA;AAAA;;AAAA;AAAA;AAAA,mBA4CO1C,KAAK,CAAC,GAAD,CA5CZ;;AAAA;AA6CC;AACA2C,YAAAA,iBAAiB,CAACP,OAAD,EAAUC,OAAV,EAAmBC,QAAnB,EAA6BG,YAA7B,EAA2CF,KAA3C,EAAkDC,MAAlD,EAA0DE,EAA1D,CAAjB;;AA9CD;AAAA;AAAA;;AAAA;AAiDD3B,YAAAA,OAAO,CAACG,GAAR,6BAAiCf,QAAQ,CAAC6B,MAA1C;AACAa,YAAAA,QAAQ,CAACU,SAAS,CAACa,YAAX,EAAyBjE,QAAzB,CAAR;AAlDC;;AAAA;AAMsC4B,YAAAA,CAAC,IAAI,CAN3C;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/* eslint-disable import/no-cycle */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-lonely-if */\n/* eslint-disable no-await-in-loop */\n/* eslint-disable indent */\n/* eslint-disable max-len */\n/* eslint-disable operator-linebreak */\n/* eslint-disable no-trailing-spaces */\n/* eslint-disable camelcase */\n/* eslint-disable padded-blocks */\n/* eslint-disable no-console */\n\n// logic\nimport hashURL from '@/components/Utils/logic/hashURL';\nimport sleep from '@/components/Utils/logic/sleep';\n\nimport { createSongDots } from '@/components/Utils/p5/songVisualisation';\n\n// Spotify\nlet spotifyPlayerID = null;\nlet playlist = [];\n\n// Set up the Web Playback SDK PLAYER\nwindow.onSpotifyPlayerAPIReady = () => {\n  const TOKEN = hashURL();\n\n  // eslint-disable-next-line no-undef\n  const player = new Spotify.Player({\n    name: 'IAE',\n    getOAuthToken: (cb) => { cb(TOKEN); },\n  });\n\n  // Error handling\n  player.on('initialization_error', (e) => console.error(e));\n  player.on('authentication_error', (e) => console.error(e));\n  player.on('account_error', (e) => console.error(e));\n  player.on('playback_error', (e) => console.error(e));\n\n  // Playback status updates\n  player.on('player_state_changed', (state) => {\n    console.log(state);\n    // $('#current-track').attr('src', state.track_window.current_track.album.images[0].url);\n    // $('#current-track-name').text(state.track_window.current_track.name);\n  });\n\n  // Player Ready\n  player.on('ready', (data) => {\n    console.log('Ready with Device ID', data.device_id);\n    \n    // make the player id globally accessible\n    spotifyPlayerID = data.device_id;\n  });\n\n  // Connect to the player!\n  player.connect();\n};\n\nasync function getSongsData() {\n  const TOKEN = hashURL();\n\n  try {\n\n    // Node.js\n    const request = await fetch(`http://localhost:5000/spotify/?token=${TOKEN}`);\n\n    // Python\n    // const request = await fetch(`http://localhost:5000/spotify/${TOKEN}/${valence}/${arousal}`);\n\n    const response = await request.json();\n    // console.log(response);\n    return response;\n\n  } catch (err) {\n    console.log(err);\n    return err;\n  }\n}\n\nexport function removeATempPlaylist() {\n  // empty the playlist and refill it\n  playlist = [];\n}\n\nexport function updatePlaylist(id, how) {\n\n  // splice it off the playlist array\n  if (how === 'remove') {\n    for (let i = playlist.length - 1; i >= 0; i -= 1) {\n      if (playlist[i] === id) playlist.splice(id, 1);\n    }\n  } else playlist.push(id);\n}\n\nexport async function makeATempPlaylist(id, valence, arousal, starDots, width, height, chosenPoints, p5) {\n  \n  if (playlist.length === 0) {\n\n    // append the song's ids to the array\n    playlist.push(id);\n\n    // accepted songs\n    createSongDots('accepted', valence, arousal, id, \n                    starDots, width, height, p5);\n  } else {\n    for (let i = 0; i < playlist.length; i += 1) {\n  \n      // check for duplicates\n      if (id === playlist[i]) {\n        \n        await sleep(250);\n  \n        // redo the workflow\n        handlingSongsData(valence, arousal, starDots, chosenPoints, width, height, p5);\n  \n        break;\n      } else {\n          \n        // check the duplicates till the last element of the array\n        if (i === playlist.length - 1) {\n                \n          // append the song's ids to the array\n          playlist.push(id);\n  \n          // preview_urls.push(preview_url);\n  \n          // titles.push(title);\n  \n          // valences.push(song_valence);\n  \n          // arousals.push(song_energy);\n  \n          console.log(`Counter ${Number(playlist.length)}`);\n  \n          // await sleep(250);\n  \n          // accepted songs\n          createSongDots('accepted', valence, arousal, id, \n                          starDots, width, height, p5);\n  \n          break;\n        }\n      }\n    }\n  }\n}\n\n// Play a track using our new device ID\nasync function playSong(TOKEN) {\n\n  try {\n\n    // Node.js\n    const request = await fetch(`http://localhost:5000/play/?token=${TOKEN}&playlist=${playlist}&player_id=${spotifyPlayerID}`);\n\n    const response = await request.json();\n    console.log(response);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// GLOBALLY ACCESSIBLE FUNCTIONS\nexport async function LoginHandlers() {\n  // handling production and development mode\n  const PRODUCTION = process.env.NODE_ENV;\n\n  // if it's production mode, get rid of the proxied server,\n  // because, the client will be built on top of Python then,\n  // and it is served by Python as static files\n  // otherwise, run these two sides separately,\n  // with the endpoint /api as a proxy to the server\n  const ENDPOINT = (PRODUCTION === 'production') ? '' : '/api';\n  try {\n    window.location.href = `${ENDPOINT}/login`;\n  } catch (e) {\n    window.location.href = '/';\n    console.log(e);\n  }\n}\n\nexport async function handlingSongsData(valence, arousal, starDots, chosenPoints, width, height, p5) {\n\n  // get songs' valence and arousal data \n  const audio_features = await getSongsData();\n\n  // console.log(audio_features);\n  for (let i = 0; i < audio_features.length; i += 1) {\n\n    const song_data = audio_features[i];\n\n    // if playlist array hasn't reached its end\n    if (playlist.length < 5) {\n\n      // if i hasn't reached the end of the audio featiures array's loop\n      if (i < audio_features.length - 1) {\n\n        const bounds = starDots[chosenPoints[0]][chosenPoints[1]].showBoundaries();\n        // console.log(`Bounds: ${bounds.x1}, ${bounds.x2}, ${bounds.y1}, ${bounds.y2}`);\n\n        // map song's affective values to coordinates on the map\n        const song_i = Math.floor(song_data.valence * starDots.length);\n        const song_j = Math.floor((1 - song_data.arousal) * starDots[song_i].length);\n\n        const song_x = width / 5 + song_i * 15.4;\n        const song_y = height / 5 + song_j * 15.4;\n        // console.log(`Song's Coordinates: ${song_x}, ${song_y}`);\n\n        // compare\n        if (song_x > bounds.x1 && \n            song_x < bounds.x2\n        && song_y > bounds.y1 && \n            song_y < bounds.y2) {\n\n            // make a temporary playlist for the mood\n            await makeATempPlaylist(song_data.id, song_data.valence, song_data.arousal, starDots, width, height, chosenPoints, p5);\n        } else {\n\n          // unaccepted songs\n          createSongDots('unaccepted', song_data.valence, song_data.arousal, song_data.id, \n                          starDots, width, height, p5);\n        }\n\n      // otherwise, redo the loop again until the playlist array condition is satisfied\n      } else {\n        await sleep(500);\n        // console.log(playlist.length)\n        handlingSongsData(valence, arousal, starDots, chosenPoints, width, height, p5);\n      }\n    } else {\n      console.log(`End The Loop With ${playlist.length} songs`);\n      playSong(song_data.access_token, playlist);\n      break;\n    }\n  }\n}\n"]}]}